/*
* jQuery Multi-Column-Select v0.3
*
* Copyright (c) 2014 DanSmith
*
* Licensed under MIT
*
*/
(function(a){a.fn.MultiColumnSelect=function(c){var b=[];$optioncount=0;var d=a.extend({multiple:false,useOptionText:true,hideselect:true,openmenuClass:"mcs-open",openmenuText:"Choose An Option",openclass:"open",containerClass:"mcs-container",itemClass:"mcs-item",idprefix:null,duration:200,onOpen:null,onClose:null,onItemSelect:null},c);this.find("select").val(0);if(d.hideselect==true){this.find("select").hide()}else{this.find("select").show()}init_msc(d.openmenuClass,d.openmenuText,d.containerClass,d.multiple,this);this.find("select option").each(function(g,f){generateitems(this,d.useOptionText,d.idprefix,d.itemClass,d.containerClass)});this.on("click","."+d.itemClass,function(f){$select=a(this).parent().prev().prev();if($select.val()!==null){b=$select.val()}itemclick(this,d.itemClass,b);if(a.isFunction(d.onItemSelect)){d.onItemSelect.call(this)}f.preventDefault()});this.find("."+d.openmenuClass).on("click",function(f){$menucontainer=a(this).next();if(a(this).hasClass(d.openclass)){a(this).removeClass(d.openclass);$menucontainer.slideToggle("slow",function(){if(a.isFunction(d.onClose)){d.onClose.call(this)}})}else{a(this).addClass(d.openclass);$menucontainer.slideToggle("slow",function(){if(a.isFunction(d.onOpen)){d.onOpen.call(this)}})}f.preventDefault()});return this};a.fn.MultiColumnSelectDestroy=function(){destroymsc(this)};a.fn.MultiColumnSelectAdditem=function(d,c,e){$mcs=this.find("select");$count=this.find("select options").size();$mcs.append(a("<option/>",{value:d,text:c}));$toggle=$mcs.next();if($toggle.hasClass("mcs")){$container=$toggle.next();$menuitem=$container.children();$menuitemClass=$menuitem.attr("class");var b="";if(typeof(e)!=="undefined"){b="' id='"+e+$count}$newitem="<a class='"+$menuitemClass+" additem' data='"+d+b+"'>"+c+"</a>";$container.append($newitem)}};itemclick=function(b,e,c){$itemdata=a(b).attr("data");$menucontainer=a(b).parent();if($menucontainer.hasClass("Multi")){if(a(b).hasClass("active")){a(b).removeClass("active");var d=$itemdata;c.splice(a.inArray(d,c),1)}else{a(b).addClass("active");c.push($itemdata)}$menucontainer.siblings("select").val(c)}if(!$menucontainer.hasClass("Multi")){$menucontainer.siblings("select").val($itemdata);a(b).siblings("a."+e).removeClass("active");a(b).addClass("active")}};init_msc=function(f,e,c,d,b){toggle=document.createElement("a");mcscontainer=document.createElement("div");a(toggle).addClass(f).addClass("mcs").html(e).appendTo(b);if(d==true){a(mcscontainer).addClass("Multi")}a(mcscontainer).addClass(c).appendTo(b)};generateitems=function(c,f,i,h,g){var e;var b="";$menucontainer=a(c).parent();$optioncount+=1;var d="";if(f==true){d=a(c).text()}if(i!==null){b="' id='"+i+$optioncount}e="<a class='"+h+"' data='"+a(c).attr("value")+b+"'>"+d+"</a>";$menucontainer.siblings("."+g).append(e)};destroymsc=function(b){$mcs=b.find("select");$mcs.show();if($mcs.next().hasClass("mcs")){$mcs.next().remove();$mcs.next().remove()}}}(jQuery));
