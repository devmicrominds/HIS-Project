(function(e,t,n){var r="silverTrackInstance";e.fn.silverTrack=function(t){var n=e(this);if(!n.data(r)){t=e.extend({},e.fn.silverTrack.options,t);var s=new i(n,t);n.data(r,s);return s}return n.data(r)};e.fn.silverTrack.options={perPage:4,itemClass:"item",mode:"horizontal",autoHeight:false,cover:false,duration:600,easing:"swing",animateFunction:null,animationAxis:"x"};var i=function(e,t){this.options=t;this.container=e;this.paginationEnabled=true;this.calculateTotalPages=true;this.currentPage=1;this.totalPages=1;this.plugins=[];this.reloadItems()};i.prototype={start:function(){if(this.options.animateFunction===null){this._validateAnimationEasing()}this._executeAll("beforeStart");this._init();this._executeAll("afterStart")},goToPage:function(t,n){n=e.extend({animate:true},n);var r=n.animate?this.options.duration:0;var i=this.options.cover&&t===1;var s=t>this.currentPage?"next":"prev";var o=i?this._getCover():this._calculateItemsForPagination(t);if(!this._canPaginate(t)){return}if(o.length>0){var u=this._calculateItemPosition(o.get(0));var a={name:s,page:t,cover:i,items:o};if(o.length<this.options.perPage&&!i&&(this.isModeHorizontal()||this.isAxisY())){u-=this._calculateMaxShiftAvailable(o)}this.currentPage=t;this._executeAll("beforePagination",[a]);this.paginationEnabled=false;this._slide(u,a,r);this._adjustHeight(o,r)}},next:function(){this.goToPage(this.currentPage+1)},prev:function(){this.goToPage(this.currentPage-1)},hasPrev:function(){return!(this.currentPage===1)},hasNext:function(){return!(this.currentPage===this.totalPages||this.totalPages<=1)},isModeHorizontal:function(){return this.options.mode==="horizontal"},isAxisY:function(){return this.options.animationAxis==="y"},restart:function(t){t=e.extend({page:1,keepCurrentPage:false,animate:false},t);if(t.keepCurrentPage){t.page=this.currentPage}this._executeAll("beforeRestart");this.container.css("height","");this._getItems(true).css("top","");this.paginationEnabled=true;this.currentPage=1;this._init();this.goToPage(t.page,{animate:t.animate});this._executeAll("afterRestart")},install:function(e){this.plugins.push(e);this._callFunction(e,"onInstall");return this},reloadItems:function(){this._items=null},updateTotalPages:function(e){this.calculateTotalPages=false;this.totalPages=this._abs(e);this._executeAll("onTotalPagesUpdate")},findPluginByName:function(e){for(var t=0;t<this.plugins.length;t++){var n=this.plugins[t];if(n.PluginName===e){return n}}return null},_init:function(){this.animatedAttribute=this.isAxisY()?"top":"left";this._positionElements();if(this.calculateTotalPages){this._calculateTotalPages()}},_getItems:function(t){if(!this._items){this._items=e("."+this.options.itemClass,this.container)}return!t&&this.options.cover?this._items.not(":first"):this._items},_getCover:function(){return e("."+this.options.itemClass+":first",this.container)},_canPaginate:function(e){if(!this.paginationEnabled||e>this.totalPages||e<1){return false}return true},_slide:function(e,t,n){var r=this;var i={};i[this.animatedAttribute]="-"+e+"px";var s=function(){r.paginationEnabled=true;r._executeAll("afterAnimation",[t])};this._executeAll("beforeAnimation",[t]);this._animate(i,n,s)},_adjustHeight:function(t,n){if(this.options.autoHeight===true){var r=0;if(this.isModeHorizontal()){r=e(t[0]).outerHeight(true)}else{t.each(function(t,n){r+=e(n).outerHeight(true)})}var i={items:t,newHeight:r};this._executeAll("beforeAdjustHeight",[i]);this._animate({height:r+"px"},n);this._executeAll("afterAdjustHeight",[i])}},_animate:function(e,t,n){var r=this.options.easing;if(this.options.animateFunction!==null){this.options.animateFunction(e,t,r,n)}else{this.container.animate(e,t,r,n)}},_positionElements:function(){this._calculateItemDimension();this._calculateCoverDimention();this.container.css(this.animatedAttribute,"0px");if(this.isModeHorizontal()){this._positionHorizontal()}else{this._positionVertical()}},_positionHorizontal:function(){var t=0;this._getItems(true).each(function(n,r){var i=e(r);i.css({left:t+"px"});t+=i.outerWidth(true)});this.container.css("width",t+"px")},_positionVertical:function(){if(this.isAxisY()){this._positionVerticalAxisY()}else{this._positionVerticalAxisX()}},_positionVerticalAxisX:function(){var t=0;var n=0;var r=this.options.perPage;var i=this.options.cover;var s=0;this._getItems(true).each(function(o,u){var a=e(u);a.css({top:n+"px",left:t+"px"});s++;if(s===r||i&&o===0){s=0;n=0;t+=a.outerWidth(true)}else{n+=a.outerHeight(true)}});this.container.css("width",t+this.itemWidth+"px")},_positionVerticalAxisY:function(){var t=0;var n=0;var r=this.options.perPage;var i=this.options.cover;this._getItems(true).each(function(r,i){var s=e(i);s.css({top:n+"px",left:t+"px"});n+=s.outerHeight(true)});this.container.css({width:t+this.itemWidth+"px",height:n+this.itemHeight})},_calculateTotalPages:function(){this.totalPages=Math.ceil(this._getItems().length/this.options.perPage);if(this.options.cover){this.totalPages+=1}},_calculateMaxShiftAvailable:function(e){var t=this.options.perPage-e.length;return(this.isAxisY()?this.itemHeight:this.itemWidth)*t},_calculateItemPosition:function(t){return this._abs(e(t).css(this.animatedAttribute))},_calculateItemsForPagination:function(e){var t=this.options.cover?(e-1)*this.options.perPage:e*this.options.perPage;return this._getItems().slice(t-this.options.perPage,t)},_calculateWidth:function(e,t){if(this.options.cover&&t){return this.coverWidth}return e.length*this.itemWidth},_calculateItemDimension:function(){var t=this.options.cover?":eq(1)":":first";var n=e("."+this.options.itemClass+t,this.container);this.itemWidth=n.outerWidth(true);this.itemHeight=n.outerHeight(true)},_calculateCoverDimention:function(){if(this.options.cover){var e=this._getCover();this.coverWidth=e.outerWidth(true);this.coverHeight=e.outerWidth(true)}else{this.coverWidth=0;this.coverHeight=0}},_validateAnimationEasing:function(){var t=!!(e.easing&&e.easing[this.options.easing]);if(!t){this.options.easing=e.fn.silverTrack.options.easing}},_executeAll:function(e,t){for(var n=0;n<this.plugins.length;n++){this._callFunction(this.plugins[n],e,t)}},_callFunction:function(e,t,n){if(e&&t&&typeof e[t]==="function"){e[t].apply(e,[this].concat(n||[]))}},_abs:function(e){return Math.abs(parseInt(e,10))}};i.Plugins={};e.silverTrackPlugin=function(t,n){i.Plugins[t]=function(n){var r=e.extend({},this.defaults,n);this.PluginName=t;this.initialize(r)};i.Plugins[t].prototype=e.extend({defaults:{},initialize:function(e){},onInstall:function(e){},beforeStart:function(e){},afterStart:function(e){},beforeRestart:function(e){},afterRestart:function(e){},onTotalPagesUpdate:function(e){},beforeAnimation:function(e,t){},afterAnimation:function(e,t){},beforePagination:function(e,t){},beforeAdjustHeight:function(e,t){},afterAdjustHeight:function(e,t){}},n)};t.SilverTrack=i})(jQuery,window,document)